"use strict";var e=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),t=function l(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var s=Object.getPrototypeOf(e);return null===s?void 0:l(s,t,n)}if("value"in o&&o.writable)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},n=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=require("events").EventEmitter,r=function(s){function r(){o(this,r),t(Object.getPrototypeOf(r.prototype),"constructor",this).call(this)}return n(r,s),e(r,{init:{value:function(e,t){this.httpInterface="http://"+e.host+":"+e.port,this.loggingEnabled=!1,t()}},compile:{value:function(e,t){var n=this,o={REQ_TYPE:"COMPILE",REQ_CONTENT:{RULE_STRING:e}},s=new XMLHttpRequest;o=JSON.stringify(o),s.open("POST",this.httpInterface+"/nlu_interface",!0),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=JSON.parse(s.response);if(n.loggingEnabled&&(console.log("request.response"),console.log(s.response)),"OK"===e.Status){var o=e.URI;t(null,o)}else"ERROR"===e.Status&&t(e.Message)}else 4==s.readyState&&0===s.status&&t("NLU Service is unavailable")},this.loggingEnabled&&(console.log("body"),console.log(o)),s.send(o)}},parseFromRule:{value:function(e,t,n){var o=this;t=t.toLowerCase();var s={REQ_TYPE:"PARSE_FROM_TEXT",REQ_CONTENT:{RULE_STRING:e,TXT_STRING:t}},r=new XMLHttpRequest;s=JSON.stringify(s),r.open("POST",this.httpInterface+"/nlu_interface",!0),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var e=JSON.parse(r.response);if(o.loggingEnabled&&(console.log("request.response"),console.log(r.response)),"OK"===e.Status){var s=e.Result.length>0?e.Result[0]:{Input:t};n(null,s)}else"ERROR"===e.Status&&n(e.Message)}else 4==r.readyState&&0===r.status&&n("NLU Service is unavailable")},this.loggingEnabled&&(console.log("body"),console.log(s)),r.send(s)}},parseFromURI:{value:function(e,t,n){var o=this;t=t.toLowerCase();var s={REQ_TYPE:"PARSE_FROM_URI",REQ_CONTENT:{URI:e,TXT_STRING:t}},r=new XMLHttpRequest;s=JSON.stringify(s),r.open("POST",this.httpInterface+"/nlu_interface",!0),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var e=JSON.parse(r.response);if(o.loggingEnabled&&(console.log("request.response"),console.log(r.response)),"OK"===e.Status){var s=e.Result.length>0?e.Result[0]:{Input:t};n(null,s)}else"ERROR"===e.Status&&n(e.Message)}else 4==r.readyState&&0===r.status&&n("NLU Service is unavailable")},this.loggingEnabled&&(console.log("body"),console.log(s)),r.send(s)}},setLogging:{value:function(e){this.loggingEnabled=e}},parseFromFile:{value:function(){}}}),r}(s),a=new r;module.exports=a;