"use strict";var t=function(t){return t&&t.__esModule?t["default"]:t},i=require("../main").animate,n=require("../bt/main"),e=n.Status,s=n.createBehavior,a=n.factory,o=t(require("path")),r=t(require("../get-asset-uri")),u=t(require("../behavior-emitter"));module.exports=s({constructor:function(t,i){var n=t.split("://");t=1==n.length?o.join("animations",t):n[0]+"://animations/"+n[1],this.path=t,this.config=i,this.status=e.INVALID,this.onEventBind=this.onEvent.bind(this)},start:function(){var t=this;return this.status=e.IN_PROGRESS,r(this.path,this.getAssetPack(),function(n,s){i.createAnimationBuilderFromKeysPath(n,s,function(i){t.builder=i,t.builder?(i.on("STOPPED",function(){t.status=e.SUCCEEDED}),i.on("EVENT",t.onEventBind),t.config&&t.config(i),t.instance=i.play()):t.status=e.FAILED})}),!0},stop:function(){this.builder&&(this.builder.off("EVENT",this.onEventBind),this.instance.stop())},update:function(){return this.status},onEvent:function(t,i,n){u.emit(n.eventName,i,n.payload)}}),a.addBehavior(module);