"use strict";var t=function(t){return t&&t.__esModule?t["default"]:t},e=function(){function t(t,e){for(var i in e){var a=e[i];a.configurable=!0,a.value&&(a.writable=!0)}Object.defineProperties(t,e)}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=t(require("uuid")),s=t(require("./asr-vars")),r=function(){function t(e,r){i(this,t);var n="alsa";Array.isArray(r)&&r.length>0?n="wav":"string"==typeof r&&(n="wav",r=[r]),this.id="source-"+a.v4(),s.idToAudioSource[this.id]=this,this.source=n,this.wavFiles=r||[],this.audioUrl=e}return e(t,{init:{value:function(t){var e={action:"start",audio_source_id:this.id,audio_source:this.source,wav_files:this.wavFiles};e=JSON.stringify(e);var i=new XMLHttpRequest;i.open("POST",this.audioUrl,!0),i.onreadystatechange=function(){4!=i.readyState||204!=i.status&&200!=i.status?4==i.readyState&&0===i.status&&t("Could not create audio channel"):t()},i.send(e)}},destroy:{value:function(t){var e={action:"stop",audio_source_id:this.id,audio_source:this.source,wav_files:[]};e=JSON.stringify(e);var i=new XMLHttpRequest;i.open("POST",this.audioUrl,!0),i.onreadystatechange=function(){4!=i.readyState||204!=i.status&&200!=i.status?4==i.readyState&&0===i.status&&t("Could not destroy audio channel"):t()},i.send(e)}},link:{value:function(t){t.setAudioSourceId(this.id)}}}),t}();module.exports=r;