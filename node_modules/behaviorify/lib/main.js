"use strict";function e(e){return o.readFileSync(n.resolve(__dirname,e),"utf8")}function r(e){return{type:"Literal",value:e,raw:'"'+e+'"'}}function s(e){return{type:"CallExpression",callee:{type:"FunctionExpression",id:null,params:[{type:"Identifier",name:"self"}],defaults:[],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:e}]},rest:null,generator:!1,expression:!1},arguments:[{type:"ObjectExpression",properties:[]}]}}function t(){this.expression={type:"ArrayExpression",elements:[]}}function a(e){this.expression={type:"ObjectExpression",properties:e?e:[]}}var n=require("path"),o=require("fs"),i=require("babel-core"),p=require("escodegen"),d=require("esprima"),u=JSON.stringify(d.parse(e("../templates/tree.js")));t.prototype.push=function(e){this.expression.elements.push(e)},a.prototype.addKeyValue=function(e,r){this.expression.properties.push({type:"Property",key:{type:"Literal",value:e,raw:'"'+e+'"'},value:r,kind:"init",method:!1,shorthand:!1})},module.exports=function(e){for(var n,o,l=JSON.parse(u),y=new a(l.body[l.body.length-1].expression.right.body.body[0].argument.properties),c=Object.keys(e),f=0;f<c.length;f++){var h=c[f],g=e[h],x=!1,m=new a;if(m.addKeyValue("id",r(h)),g.name&&m.addKeyValue("name",r(g.name)),g.parent&&m.addKeyValue("parent",r(g.parent)),g["asset-pack"]&&m.addKeyValue("asset-pack",r(g["asset-pack"])),m.addKeyValue("class",r(g["class"])),g.children){for(n=new t,o=0;o<g.children.length;o++)n.push(r(g.children[o]));m.addKeyValue("children",n.expression)}if(g.skipped&&m.addKeyValue("skipped",r(g.skipped)),g.decorators){for(n=new t,o=0;o<g.decorators.length;o++)n.push(r(g.decorators[o]));m.addKeyValue("decorators",n.expression)}if(g.args){for(n=new t,o=0;o<g.args.length;o++)if(Array.isArray(g.args[o])&&(g.args[o]=g.args[o].join("\n")),"string"==typeof g.args[o]&&(0===g.args[o].indexOf("function")||g.args[o].indexOf("=>")>=0)){x=!0;try{var b=g.args[o],K=d.parse(b);K="ExpressionStatement"===K.body[0].type?K.body[0].expression:K.body[0],n.push(K)}catch(V){console.error("Syntax error in behavior id "+h+". See below:"),console.error(g.args[o])}}else n.push(r(g.args[o]));m.addKeyValue("args",n.expression)}x?y.addKeyValue(h,s(m.expression)):y.addKeyValue(h,m.expression)}var k=p.generate(l),v=i.transform(k).code;return v};